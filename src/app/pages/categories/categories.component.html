<div class="container">
    <div class="categories-container">
      <div class="header">
        <mat-form-field appearance="outline" class="matformfield">
          <mat-label>Search Categories</mat-label>
          <input matInput [(ngModel)]="categoriesearchTerm" (keyup)="categoriefilterchange()" />
        </mat-form-field>
        <button class="btn btn-outline-primary" style="background-color: rgb(81, 152, 81); width: 30%; color: white;" (click)="categorieOnAdding = !categorieOnAdding">
          <i class="bi bi-plus-circle"></i> Add Categorie
        </button>
      </div>
      <mat-divider style="margin: 10px 0;"></mat-divider>
      <div *ngIf="categorieOnAdding" class="add-item-form">
        <mat-form-field appearance="outline" class="matformfield">
          <mat-label>Categorie</mat-label>
          <input matInput [(ngModel)]="newCategorie.libelle" />
        </mat-form-field>
        <div class="form-actions">
          <button class="btn btn-primary" (click)="addCategorie()">Save</button>
          <button class="btn btn-danger" (click)="categorieOnAdding = false">Cancel</button>
        </div>
      </div>
      <div class="table-container">
        <table mat-table [dataSource]="categoriedataSource" matSort class="mat-elevation-z8 table">
          <!-- Categorie Column -->
          <ng-container matColumnDef="Libelle">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Categorie </th>
            <td mat-cell *matCellDef="let categorie">
              <span *ngIf="!categorie.onediting">{{categorie.libelle}}</span>
              <input *ngIf="categorie.onediting" matInput [(ngModel)]="editedCategorie.libelle" />
            </td>
          </ng-container>
  
          <!-- Options Column -->
          <ng-container matColumnDef="Options">
            <th mat-header-cell *matHeaderCellDef> Options </th>
            <td mat-cell *matCellDef="let categorie">
              <button class="btn btn-outline-primary btn-sm" *ngIf="categorie.onediting" (click)="editCategorie(categorie)">
                <i class="bi bi-floppy"></i> Save
              </button>
              <button class="btn btn-outline-success btn-sm" *ngIf="!categorie.onediting" (click)="categorieOnEditing(categorie)">
                <i class="bi bi-pencil-square"></i> Edit
              </button>
              <button class="btn btn-outline-danger btn-sm" (click)="deleteCategorie(categorie)">
                <i class="bi bi-trash3-fill"></i> Delete
              </button>
            </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
  
        <mat-paginator #paginatorCategories [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of categories">
        </mat-paginator>
      </div>
    </div>
  
    <div class="units-container">
      <div class="header">
        <mat-form-field appearance="outline" class="matformfield">
          <mat-label>Search Units</mat-label>
          <input matInput [(ngModel)]="uniteSearchTerm" (keyup)="unitefilterchange()" />
        </mat-form-field>
        <button class="btn btn-outline-primary" style="background-color: rgb(81, 152, 81); width: 30%; color: white;" (click)="uniteOnAdding = !uniteOnAdding">
          <i class="bi bi-plus-circle"></i> Add Unite
        </button>
      </div>
      <mat-divider style="margin: 10px 0;"></mat-divider>
      <div *ngIf="uniteOnAdding" class="add-item-form">
        <mat-form-field appearance="outline" class="matformfield">
          <mat-label>Unite</mat-label> 
          <input matInput [(ngModel)]="newUnite.libelle" />
        </mat-form-field>
        <div class="form-actions">
          <button class="btn btn-primary" (click)="addUnite()">Save</button>
          <button class="btn btn-danger" (click)="uniteOnAdding = false">Cancel</button>
        </div>
      </div>
      <div class="table-container">
        <table mat-table [dataSource]="unitedataSource" matSort class="mat-elevation-z8 table">
          <!-- Unite Column -->
          <ng-container matColumnDef="Libelle">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Unite </th>
            <td mat-cell *matCellDef="let unite">
              <span *ngIf="!unite.onediting">{{unite.libelle}}</span>
              <input *ngIf="unite.onediting" matInput [(ngModel)]="editedUnite.libelle" />
            </td>
          </ng-container>
  
          <!-- Options Column -->
          <ng-container matColumnDef="Options">
            <th mat-header-cell *matHeaderCellDef> Options </th>
            <td mat-cell *matCellDef="let unite">
              <button class="btn btn-outline-primary btn-sm" *ngIf="unite.onediting" (click)="editUnite(unite)">
                <i class="bi bi-floppy"></i> Save
              </button>
              <button class="btn btn-outline-success btn-sm" *ngIf="!unite.onediting" (click)="uniteOnEditing(unite)">
                <i class="bi bi-pencil-square"></i> Edit
              </button>
              <button class="btn btn-outline-danger btn-sm" (click)="deleteUnite(unite)">
                <i class="bi bi-trash3-fill"></i> Delete
              </button>
            </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
  
        <mat-paginator #paginatorUnites [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of units">
        </mat-paginator>
      </div>
    </div>
  </div>
  